"use strict";require("@babel/polyfill");var _mapbox=require("./mapbox"),_login=require("./login"),_updateSettings=require("./updateSettings"),mapBox=document.getElementById("map"),loginForm=document.querySelector(".form--login"),logOutBtn=document.querySelector(".nav__el--logout"),userDataForm=document.querySelector(".form-user-data"),userPasswordForm=document.querySelector(".form-user-password");if(mapBox){var locations=JSON.parse(mapBox.dataset.locations);(0,_mapbox.displayMap)(locations)}loginForm&&loginForm.addEventListener("submit",function(e){e.preventDefault();var t=document.getElementById("email").value,n=document.getElementById("password").value;(0,_login.login)(t,n)}),logOutBtn&&logOutBtn.addEventListener("click",_login.logout),userDataForm&&userDataForm.addEventListener("submit",function(e){e.preventDefault();var t=new FormData;t.append("name",document.getElementById("name").value),t.append("email",document.getElementById("email").value),t.append("photo",document.getElementById("photo").files[0]),(0,_updateSettings.updateSettings)(t,"data")}),userPasswordForm&&userPasswordForm.addEventListener("submit",function(t){var n,o,r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),document.querySelector(".btn--save-password").textContent="Updating...",n=document.getElementById("password-current").value,o=document.getElementById("password").value,r=document.getElementById("password-confirm").value,e.next=7,regeneratorRuntime.awrap((0,_updateSettings.updateSettings)({passwordCurrent:n,password:o,passwordConfirm:r},"password"));case 7:document.querySelector(".btn--save-password").textContent="Save password",document.getElementById("password-current").value="",document.getElementById("password").value="",document.getElementById("password-confirm").value="";case 11:case"end":return e.stop()}})});
"use strict";var express=require("express"),morgan=require("morgan"),AppError=require("./utils/appError"),globalErrorHandler=require("./controllers/errorController"),tourRouter=require("./routes/tourRoutes"),userRouter=require("./routes/userRoutes"),app=express();"development"===process.env.NODE_ENV&&app.use(morgan("dev")),app.use(express.json()),app.use(express.static("".concat(__dirname,"/public"))),app.use(function(r,e,o){r.requestTime=(new Date).toISOString(),o()}),app.use("/api/v1/tours",tourRouter),app.use("/api/v1/users",userRouter),app.all("*",function(r,e,o){o(new AppError("Can't find ".concat(r.originalUrl," on this server!"),404))}),app.use(globalErrorHandler),module.exports=app;
"use strict";var mongoose=require("mongoose"),Tour=require("./../models/tourModel");exports.getAllTours=function(t,s){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Tour.find());case 3:r=e.sent,s.status(200).json({status:"success",requestedAt:t.requestTime,results:r.length,data:{tours:r}}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s.status(400).json({status:"fail",message:err});case 10:case"end":return e.stop()}},null,null,[[0,7]])},exports.getTour=function(t,s){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Tour.findById(t.params.id));case 3:r=e.sent,s.status(200).json({status:"success",data:{tour:r}}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s.status(400).json({status:"fail",message:err});case 10:case"end":return e.stop()}},null,null,[[0,7]])},exports.createTour=function(t,s){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Tour.create(t.body));case 3:r=e.sent,s.status(201).json({status:"success",requestedAt:t.requestTime,data:{tour:r}}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s.status(400).json({status:"fail",message:"Invalid data sent! ðŸ˜…"});case 10:case"end":return e.stop()}},null,null,[[0,7]])},exports.updateTour=function(t,s){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Tour.findByIdAndUpdate(t.params.id,t.body,{new:!0,runValidators:!0}));case 3:r=e.sent,s.status(200).json({status:"success",data:{tour:r}}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s.status(404).json({status:"fail",message:e.t0});case 10:case"end":return e.stop()}},null,null,[[0,7]])},exports.deleteTour=function(t,s){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Tour.findByIdAndDelete(t.params.id));case 3:s.status(200).json({status:"success",requestedAt:t.requestTime,data:null}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),s.status(404).json({status:"fail",message:e.t0});case 9:case"end":return e.stop()}},null,null,[[0,6]])};